/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Ccalze%5COneDrive%20-%20University%20of%20Central%20Florida%5CDesktop%5Csand%5Cacee-api%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccalze%5COneDrive%20-%20University%20of%20Central%20Florida%5CDesktop%5Csand%5Cacee-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Ccalze%5COneDrive%20-%20University%20of%20Central%20Florida%5CDesktop%5Csand%5Cacee-api%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccalze%5COneDrive%20-%20University%20of%20Central%20Florida%5CDesktop%5Csand%5Cacee-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_calze_OneDrive_University_of_Central_Florida_Desktop_sand_acee_api_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/chat/route.ts */ \"(rsc)/./src/app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\calze\\\\OneDrive - University of Central Florida\\\\Desktop\\\\sand\\\\acee-api\\\\src\\\\app\\\\api\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_calze_OneDrive_University_of_Central_Florida_Desktop_sand_acee_api_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNjYWx6ZSU1Q09uZURyaXZlJTIwLSUyMFVuaXZlcnNpdHklMjBvZiUyMENlbnRyYWwlMjBGbG9yaWRhJTVDRGVza3RvcCU1Q3NhbmQlNUNhY2VlLWFwaSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDY2FsemUlNUNPbmVEcml2ZSUyMC0lMjBVbml2ZXJzaXR5JTIwb2YlMjBDZW50cmFsJTIwRmxvcmlkYSU1Q0Rlc2t0b3AlNUNzYW5kJTVDYWNlZS1hcGkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDa0U7QUFDL0k7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hY2VlLXByb3RvLW9uZS8/N2M4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxjYWx6ZVxcXFxPbmVEcml2ZSAtIFVuaXZlcnNpdHkgb2YgQ2VudHJhbCBGbG9yaWRhXFxcXERlc2t0b3BcXFxcc2FuZFxcXFxhY2VlLWFwaVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxjaGF0XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGNhbHplXFxcXE9uZURyaXZlIC0gVW5pdmVyc2l0eSBvZiBDZW50cmFsIEZsb3JpZGFcXFxcRGVza3RvcFxcXFxzYW5kXFxcXGFjZWUtYXBpXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNoYXRcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Ccalze%5COneDrive%20-%20University%20of%20Central%20Florida%5CDesktop%5Csand%5Cacee-api%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccalze%5COneDrive%20-%20University%20of%20Central%20Florida%5CDesktop%5Csand%5Cacee-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/chat/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/chat/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _app_lib_openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app/lib/openai */ \"(rsc)/./src/app/lib/openai.ts\");\n/* harmony import */ var _app_api_database_singlestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/api/database/singlestore */ \"(rsc)/./src/app/api/database/singlestore.ts\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n\n\n\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const messages = body.messages;\n        // get last 6 messages (user and ai) for context\n        const messagesTruncated = messages.slice(-6);\n        const embedding = await (0,_app_lib_openai__WEBPACK_IMPORTED_MODULE_0__.getEmbedding)(messagesTruncated.map((message)=>message.content).join(\"\\n\"));\n        // NEED TO GET USER'S ID FOR SPECIFIC CONVO HISTORY\n        const relevantDocs = await (0,_app_api_database_singlestore__WEBPACK_IMPORTED_MODULE_1__.findRelevantDocs)({\n            embedding\n        });\n        let systemMessage;\n        if (relevantDocs) {\n            systemMessage = {\n                role: \"assistant\",\n                content: \"You are an AI assisant built to aid employees in finding relevant documentation pertaining to the company. You are able to answer the user's questions based on documents in the database. Do not use any sources other than the relevant documents provided.\" + \"The relevant documents found in the database for this query are:\\n\" + relevantDocs.map((doc)=>`Title: ${doc.title}\\n\\nContent:\\n${doc.text}`).join()\n            };\n        } else {\n            systemMessage = {\n                role: \"assistant\",\n                content: \"You are an AI assisant built to aid employees in finding relevant documentation pertaining to the company. You are able to answer the user's questions based on documents in the database. Do not use any sources other than the relevant documents provided.\" + \"Unfortunately, there are no relevant documents available, so let the user know that you are unable to help them at this moment \"\n            };\n        }\n        const response = await _app_lib_openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"].chat.completions.create({\n            model: \"gpt-3.5-turbo\",\n            stream: true,\n            messages: [\n                systemMessage,\n                ...messagesTruncated\n            ]\n        });\n        const stream = (0,ai__WEBPACK_IMPORTED_MODULE_2__.OpenAIStream)(response);\n        return new ai__WEBPACK_IMPORTED_MODULE_2__.StreamingTextResponse(stream);\n    } catch (error) {\n        console.error(error);\n        return Response.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jaGF0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDd0Q7QUFDVTtBQUNUO0FBRWxELGVBQWVLLEtBQUtDLEdBQVk7SUFDckMsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsSUFBSUUsSUFBSTtRQUUzQixNQUFNQyxXQUFvQ0YsS0FBS0UsUUFBUTtRQUV2RCxnREFBZ0Q7UUFDaEQsTUFBTUMsb0JBQW9CRCxTQUFTRSxLQUFLLENBQUMsQ0FBQztRQUUxQyxNQUFNQyxZQUFZLE1BQU1YLDZEQUFZQSxDQUNsQ1Msa0JBQWtCRyxHQUFHLENBQUMsQ0FBQ0MsVUFBWUEsUUFBUUMsT0FBTyxFQUFFQyxJQUFJLENBQUM7UUFHM0QsbURBQW1EO1FBQ25ELE1BQU1DLGVBQW9CLE1BQU1mLCtFQUFnQkEsQ0FBQztZQUFFVTtRQUFVO1FBQzdELElBQUlNO1FBRUosSUFBR0QsY0FDSDtZQUNFQyxnQkFBZ0I7Z0JBQ2RDLE1BQU07Z0JBQ05KLFNBQ0Usa1FBQ0EsdUVBQ0FFLGFBQ0dKLEdBQUcsQ0FDRixDQUFDTyxNQUNDLENBQUMsT0FBTyxFQUFFQSxJQUFJQyxLQUFLLENBQUMsY0FBYyxFQUFFRCxJQUFJRSxJQUFJLENBQUMsQ0FBQyxFQUVqRE4sSUFBSTtZQUNYO1FBQ0YsT0FFSTtZQUNGRSxnQkFBZ0I7Z0JBQ2RDLE1BQU07Z0JBQ05KLFNBQ0Usa1FBQ0E7WUFDSjtRQUVGO1FBR0EsTUFBTVEsV0FBVyxNQUFNdkIsdURBQU1BLENBQUN3QixJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsTUFBTSxDQUFDO1lBQ3BEQyxPQUFPO1lBQ1BDLFFBQVE7WUFDUm5CLFVBQVU7Z0JBQUNTO21CQUFrQlI7YUFBa0I7UUFDakQ7UUFFQSxNQUFNa0IsU0FBU3pCLGdEQUFZQSxDQUFDb0I7UUFDNUIsT0FBTyxJQUFJbkIscURBQXFCQSxDQUFDd0I7SUFDbkMsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQ0E7UUFFZCxPQUFPRSxTQUFTdkIsSUFBSSxDQUFDO1lBQUVxQixPQUFPO1FBQXdCLEdBQUc7WUFBRUcsUUFBUTtRQUFJO0lBQ3pFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hY2VlLXByb3RvLW9uZS8uL3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHM/NDZiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGF0Q29tcGxldGlvbk1lc3NhZ2UgfSBmcm9tIFwib3BlbmFpL3Jlc291cmNlcy9pbmRleC5tanNcIjtcclxuaW1wb3J0IG9wZW5haSwgeyBnZXRFbWJlZGRpbmcgfSBmcm9tIFwiQC9hcHAvbGliL29wZW5haVwiO1xyXG5pbXBvcnQgeyBmaW5kUmVsZXZhbnREb2NzIH0gZnJvbSBcIkAvYXBwL2FwaS9kYXRhYmFzZS9zaW5nbGVzdG9yZVwiO1xyXG5pbXBvcnQgeyBPcGVuQUlTdHJlYW0sIFN0cmVhbWluZ1RleHRSZXNwb25zZSB9IGZyb20gXCJhaVwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xyXG5cclxuICAgIGNvbnN0IG1lc3NhZ2VzOiBDaGF0Q29tcGxldGlvbk1lc3NhZ2VbXSA9IGJvZHkubWVzc2FnZXM7XHJcblxyXG4gICAgLy8gZ2V0IGxhc3QgNiBtZXNzYWdlcyAodXNlciBhbmQgYWkpIGZvciBjb250ZXh0XHJcbiAgICBjb25zdCBtZXNzYWdlc1RydW5jYXRlZCA9IG1lc3NhZ2VzLnNsaWNlKC02KTtcclxuXHJcbiAgICBjb25zdCBlbWJlZGRpbmcgPSBhd2FpdCBnZXRFbWJlZGRpbmcoXHJcbiAgICAgIG1lc3NhZ2VzVHJ1bmNhdGVkLm1hcCgobWVzc2FnZSkgPT4gbWVzc2FnZS5jb250ZW50KS5qb2luKFwiXFxuXCIpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIE5FRUQgVE8gR0VUIFVTRVInUyBJRCBGT1IgU1BFQ0lGSUMgQ09OVk8gSElTVE9SWVxyXG4gICAgY29uc3QgcmVsZXZhbnREb2NzOiBhbnkgPSBhd2FpdCBmaW5kUmVsZXZhbnREb2NzKHsgZW1iZWRkaW5nIH0pO1xyXG4gICAgbGV0IHN5c3RlbU1lc3NhZ2U6IENoYXRDb21wbGV0aW9uTWVzc2FnZTtcclxuXHJcbiAgICBpZihyZWxldmFudERvY3MpXHJcbiAgICB7XHJcbiAgICAgIHN5c3RlbU1lc3NhZ2UgPSB7XHJcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcclxuICAgICAgICBjb250ZW50OlxyXG4gICAgICAgICAgXCJZb3UgYXJlIGFuIEFJIGFzc2lzYW50IGJ1aWx0IHRvIGFpZCBlbXBsb3llZXMgaW4gZmluZGluZyByZWxldmFudCBkb2N1bWVudGF0aW9uIHBlcnRhaW5pbmcgdG8gdGhlIGNvbXBhbnkuIFlvdSBhcmUgYWJsZSB0byBhbnN3ZXIgdGhlIHVzZXIncyBxdWVzdGlvbnMgYmFzZWQgb24gZG9jdW1lbnRzIGluIHRoZSBkYXRhYmFzZS4gRG8gbm90IHVzZSBhbnkgc291cmNlcyBvdGhlciB0aGFuIHRoZSByZWxldmFudCBkb2N1bWVudHMgcHJvdmlkZWQuXCIgK1xyXG4gICAgICAgICAgXCJUaGUgcmVsZXZhbnQgZG9jdW1lbnRzIGZvdW5kIGluIHRoZSBkYXRhYmFzZSBmb3IgdGhpcyBxdWVyeSBhcmU6XFxuXCIgK1xyXG4gICAgICAgICAgcmVsZXZhbnREb2NzXHJcbiAgICAgICAgICAgIC5tYXAoXHJcbiAgICAgICAgICAgICAgKGRvYzogeyB0ZXh0OiBzdHJpbmc7IHRpdGxlOiBzdHJpbmcgfSkgPT5cclxuICAgICAgICAgICAgICAgIGBUaXRsZTogJHtkb2MudGl0bGV9XFxuXFxuQ29udGVudDpcXG4ke2RvYy50ZXh0fWBcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuam9pbigpLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGVsc2V7XHJcbiAgICAgIHN5c3RlbU1lc3NhZ2UgPSB7XHJcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcclxuICAgICAgICBjb250ZW50OlxyXG4gICAgICAgICAgXCJZb3UgYXJlIGFuIEFJIGFzc2lzYW50IGJ1aWx0IHRvIGFpZCBlbXBsb3llZXMgaW4gZmluZGluZyByZWxldmFudCBkb2N1bWVudGF0aW9uIHBlcnRhaW5pbmcgdG8gdGhlIGNvbXBhbnkuIFlvdSBhcmUgYWJsZSB0byBhbnN3ZXIgdGhlIHVzZXIncyBxdWVzdGlvbnMgYmFzZWQgb24gZG9jdW1lbnRzIGluIHRoZSBkYXRhYmFzZS4gRG8gbm90IHVzZSBhbnkgc291cmNlcyBvdGhlciB0aGFuIHRoZSByZWxldmFudCBkb2N1bWVudHMgcHJvdmlkZWQuXCIgK1xyXG4gICAgICAgICAgXCJVbmZvcnR1bmF0ZWx5LCB0aGVyZSBhcmUgbm8gcmVsZXZhbnQgZG9jdW1lbnRzIGF2YWlsYWJsZSwgc28gbGV0IHRoZSB1c2VyIGtub3cgdGhhdCB5b3UgYXJlIHVuYWJsZSB0byBoZWxwIHRoZW0gYXQgdGhpcyBtb21lbnQgXCIgXHJcbiAgICAgIH07XHJcblxyXG4gICAgfVxyXG4gICBcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XHJcbiAgICAgIG1vZGVsOiBcImdwdC0zLjUtdHVyYm9cIixcclxuICAgICAgc3RyZWFtOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlczogW3N5c3RlbU1lc3NhZ2UsIC4uLm1lc3NhZ2VzVHJ1bmNhdGVkXSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHN0cmVhbSA9IE9wZW5BSVN0cmVhbShyZXNwb25zZSk7XHJcbiAgICByZXR1cm4gbmV3IFN0cmVhbWluZ1RleHRSZXNwb25zZShzdHJlYW0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJvcGVuYWkiLCJnZXRFbWJlZGRpbmciLCJmaW5kUmVsZXZhbnREb2NzIiwiT3BlbkFJU3RyZWFtIiwiU3RyZWFtaW5nVGV4dFJlc3BvbnNlIiwiUE9TVCIsInJlcSIsImJvZHkiLCJqc29uIiwibWVzc2FnZXMiLCJtZXNzYWdlc1RydW5jYXRlZCIsInNsaWNlIiwiZW1iZWRkaW5nIiwibWFwIiwibWVzc2FnZSIsImNvbnRlbnQiLCJqb2luIiwicmVsZXZhbnREb2NzIiwic3lzdGVtTWVzc2FnZSIsInJvbGUiLCJkb2MiLCJ0aXRsZSIsInRleHQiLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwic3RyZWFtIiwiZXJyb3IiLCJjb25zb2xlIiwiUmVzcG9uc2UiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/database/singlestore.ts":
/*!*********************************************!*\
  !*** ./src/app/api/database/singlestore.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectSingleStore: () => (/* binding */ connectSingleStore),\n/* harmony export */   findRelevantDocs: () => (/* binding */ findRelevantDocs),\n/* harmony export */   searchDatabase: () => (/* binding */ searchDatabase),\n/* harmony export */   stopSingleStore: () => (/* binding */ stopSingleStore)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n\nconst HOST = process.env.HOST;\nconst PASSWORD = process.env.PASSWORD;\nconst USER = process.env.USER;\nconst SQL_DATABASE = process.env.SQL_DATABASE;\nconst VEC_DATABASE = process.env.VEC_DATABASE;\nif (!HOST || !PASSWORD || !USER) {\n    throw Error(\"db info scuffed\");\n}\n//this function connects to singlestoredb\nasync function connectSingleStore() {\n    let singleStoreConnection;\n    //pass creds to mysql\n    try {\n        singleStoreConnection = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createConnection({\n            host: HOST,\n            user: USER,\n            password: PASSWORD,\n            database: VEC_DATABASE\n        });\n        return singleStoreConnection;\n    } catch (err) {\n        console.error(\"ERROR\", err);\n        process.exit(1);\n    }\n}\n//ends singlestore connection\nasync function stopSingleStore(conn) {\n    await conn.end();\n}\n//finds relevant documents to the user query in the database\nasync function findRelevantDocs({ conn, embedding }) {\n    try {\n        if (!conn) {\n            conn = await connectSingleStore();\n        }\n        //SQL QUERY - takes the embedding, converts it to a vector singlestore recognizes,\n        //  does the dot product between that vector and all the vectors in the table\n        const query = \"SELECT title, text, DOT_PRODUCT_F64(JSON_ARRAY_PACK_F64('[\" + embedding + \"]'), content_vector) AS score FROM wikipedia ORDER BY score DESC LIMIT 1\";\n        const result = await conn.query(query);\n        return result[0];\n    } catch (error) {\n        console.log(error);\n        return error;\n    //!IMPORTANT! end connection after each query\n    } finally{\n        if (conn) {\n            await stopSingleStore(conn);\n        }\n    }\n}\nasync function searchDatabase({ conn, embedding }) {\n    try {\n        if (!conn) {\n            conn = await connectSingleStore();\n        }\n        let query = \"SELECT title, text, DOT_PRODUCT_F64(JSON_ARRAY_PACK_F64('[\" + embedding + \"]'), content_vector) AS score FROM wikipedia ORDER BY score DESC LIMIT 5\";\n        const result = await conn.query(query);\n        return result[0];\n    } catch (error) {\n        console.log(error);\n        return error;\n    } finally{\n        if (conn) {\n            await stopSingleStore(conn);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9kYXRhYmFzZS9zaW5nbGVzdG9yZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNtQztBQUVuQyxNQUFNQyxPQUFPQyxRQUFRQyxHQUFHLENBQUNGLElBQUk7QUFDN0IsTUFBTUcsV0FBV0YsUUFBUUMsR0FBRyxDQUFDQyxRQUFRO0FBQ3JDLE1BQU1DLE9BQU9ILFFBQVFDLEdBQUcsQ0FBQ0UsSUFBSTtBQUM3QixNQUFNQyxlQUFlSixRQUFRQyxHQUFHLENBQUNHLFlBQVk7QUFDN0MsTUFBTUMsZUFBZUwsUUFBUUMsR0FBRyxDQUFDSSxZQUFZO0FBRTdDLElBQUksQ0FBQ04sUUFBUSxDQUFDRyxZQUFZLENBQUNDLE1BQU07SUFDL0IsTUFBTUcsTUFBTTtBQUNkO0FBRUEseUNBQXlDO0FBQ2xDLGVBQWVDO0lBQ3BCLElBQUlDO0lBRUoscUJBQXFCO0lBQ3JCLElBQUk7UUFDRkEsd0JBQXdCViw0REFBc0IsQ0FBQztZQUM3Q1ksTUFBTVg7WUFDTlksTUFBTVI7WUFDTlMsVUFBVVY7WUFDVlcsVUFBVVI7UUFDWjtRQUNBLE9BQU9HO0lBQ1QsRUFBRSxPQUFPTSxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQyxTQUFTRjtRQUV2QmQsUUFBUWlCLElBQUksQ0FBQztJQUNmO0FBQ0Y7QUFFQSw2QkFBNkI7QUFDdEIsZUFBZUMsZ0JBQWdCQyxJQUFzQjtJQUMxRCxNQUFNQSxLQUFLQyxHQUFHO0FBQ2hCO0FBRUEsNERBQTREO0FBQ3JELGVBQWVDLGlCQUFpQixFQUNyQ0YsSUFBSSxFQUNKRyxTQUFTLEVBSVY7SUFDQyxJQUFJO1FBQ0YsSUFBSSxDQUFDSCxNQUFNO1lBQ1RBLE9BQU8sTUFBTVo7UUFDZjtRQUVBLGtGQUFrRjtRQUNsRiw2RUFBNkU7UUFDN0UsTUFBTWdCLFFBQ0osK0RBQ0FELFlBQ0E7UUFFRixNQUFNRSxTQUFTLE1BQU1MLEtBQUtJLEtBQUssQ0FBQ0E7UUFDaEMsT0FBT0MsTUFBTSxDQUFDLEVBQUU7SUFFbEIsRUFBRSxPQUFPUixPQUFPO1FBQ2RELFFBQVFVLEdBQUcsQ0FBQ1Q7UUFDWixPQUFPQTtJQUNQLDZDQUE2QztJQUMvQyxTQUFVO1FBQ1IsSUFBSUcsTUFBTTtZQUNSLE1BQU1ELGdCQUFnQkM7UUFDeEI7SUFDRjtBQUNGO0FBRU8sZUFBZU8sZUFBZSxFQUNuQ1AsSUFBSSxFQUNKRyxTQUFTLEVBSVY7SUFDQyxJQUFJO1FBQ0YsSUFBSSxDQUFDSCxNQUFNO1lBQ1RBLE9BQU8sTUFBTVo7UUFDZjtRQUVBLElBQUlnQixRQUNGLCtEQUNBRCxZQUNBO1FBRUYsTUFBTUUsU0FBUyxNQUFNTCxLQUFLSSxLQUFLLENBQUNBO1FBQ2hDLE9BQU9DLE1BQU0sQ0FBQyxFQUFFO0lBQ2xCLEVBQUUsT0FBT1IsT0FBTztRQUNkRCxRQUFRVSxHQUFHLENBQUNUO1FBQ1osT0FBT0E7SUFDVCxTQUFVO1FBQ1IsSUFBSUcsTUFBTTtZQUNSLE1BQU1ELGdCQUFnQkM7UUFDeEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWNlZS1wcm90by1vbmUvLi9zcmMvYXBwL2FwaS9kYXRhYmFzZS9zaW5nbGVzdG9yZS50cz8wZGEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbm5lY3QgfSBmcm9tIFwiaHR0cDJcIjtcclxuaW1wb3J0IG15c3FsIGZyb20gXCJteXNxbDIvcHJvbWlzZVwiO1xyXG5cclxuY29uc3QgSE9TVCA9IHByb2Nlc3MuZW52LkhPU1Q7XHJcbmNvbnN0IFBBU1NXT1JEID0gcHJvY2Vzcy5lbnYuUEFTU1dPUkQ7XHJcbmNvbnN0IFVTRVIgPSBwcm9jZXNzLmVudi5VU0VSO1xyXG5jb25zdCBTUUxfREFUQUJBU0UgPSBwcm9jZXNzLmVudi5TUUxfREFUQUJBU0U7XHJcbmNvbnN0IFZFQ19EQVRBQkFTRSA9IHByb2Nlc3MuZW52LlZFQ19EQVRBQkFTRTtcclxuXHJcbmlmICghSE9TVCB8fCAhUEFTU1dPUkQgfHwgIVVTRVIpIHtcclxuICB0aHJvdyBFcnJvcihcImRiIGluZm8gc2N1ZmZlZFwiKTtcclxufVxyXG5cclxuLy90aGlzIGZ1bmN0aW9uIGNvbm5lY3RzIHRvIHNpbmdsZXN0b3JlZGJcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RTaW5nbGVTdG9yZSgpIHtcclxuICBsZXQgc2luZ2xlU3RvcmVDb25uZWN0aW9uO1xyXG5cclxuICAvL3Bhc3MgY3JlZHMgdG8gbXlzcWxcclxuICB0cnkge1xyXG4gICAgc2luZ2xlU3RvcmVDb25uZWN0aW9uID0gbXlzcWwuY3JlYXRlQ29ubmVjdGlvbih7XHJcbiAgICAgIGhvc3Q6IEhPU1QsXHJcbiAgICAgIHVzZXI6IFVTRVIsXHJcbiAgICAgIHBhc3N3b3JkOiBQQVNTV09SRCxcclxuICAgICAgZGF0YWJhc2U6IFZFQ19EQVRBQkFTRSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHNpbmdsZVN0b3JlQ29ubmVjdGlvbjtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUlwiLCBlcnIpO1xyXG5cclxuICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICB9XHJcbn1cclxuXHJcbi8vZW5kcyBzaW5nbGVzdG9yZSBjb25uZWN0aW9uXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdG9wU2luZ2xlU3RvcmUoY29ubjogbXlzcWwuQ29ubmVjdGlvbikge1xyXG4gIGF3YWl0IGNvbm4uZW5kKCk7XHJcbn1cclxuXHJcbi8vZmluZHMgcmVsZXZhbnQgZG9jdW1lbnRzIHRvIHRoZSB1c2VyIHF1ZXJ5IGluIHRoZSBkYXRhYmFzZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZFJlbGV2YW50RG9jcyh7XHJcbiAgY29ubixcclxuICBlbWJlZGRpbmcsXHJcbn06IHtcclxuICBjb25uPzogbXlzcWwuQ29ubmVjdGlvbjtcclxuICBlbWJlZGRpbmc6IGFueTtcclxufSkge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIWNvbm4pIHtcclxuICAgICAgY29ubiA9IGF3YWl0IGNvbm5lY3RTaW5nbGVTdG9yZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vU1FMIFFVRVJZIC0gdGFrZXMgdGhlIGVtYmVkZGluZywgY29udmVydHMgaXQgdG8gYSB2ZWN0b3Igc2luZ2xlc3RvcmUgcmVjb2duaXplcyxcclxuICAgIC8vICBkb2VzIHRoZSBkb3QgcHJvZHVjdCBiZXR3ZWVuIHRoYXQgdmVjdG9yIGFuZCBhbGwgdGhlIHZlY3RvcnMgaW4gdGhlIHRhYmxlXHJcbiAgICBjb25zdCBxdWVyeSA9XHJcbiAgICAgIFwiU0VMRUNUIHRpdGxlLCB0ZXh0LCBET1RfUFJPRFVDVF9GNjQoSlNPTl9BUlJBWV9QQUNLX0Y2NCgnW1wiICtcclxuICAgICAgZW1iZWRkaW5nICtcclxuICAgICAgXCJdJyksIGNvbnRlbnRfdmVjdG9yKSBBUyBzY29yZSBGUk9NIHdpa2lwZWRpYSBPUkRFUiBCWSBzY29yZSBERVNDIExJTUlUIDFcIjtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uLnF1ZXJ5KHF1ZXJ5KTtcclxuICAgIHJldHVybiByZXN1bHRbMF07XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbiAgICAvLyFJTVBPUlRBTlQhIGVuZCBjb25uZWN0aW9uIGFmdGVyIGVhY2ggcXVlcnlcclxuICB9IGZpbmFsbHkge1xyXG4gICAgaWYgKGNvbm4pIHtcclxuICAgICAgYXdhaXQgc3RvcFNpbmdsZVN0b3JlKGNvbm4pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaERhdGFiYXNlKHtcclxuICBjb25uLFxyXG4gIGVtYmVkZGluZyxcclxufToge1xyXG4gIGNvbm4/OiBteXNxbC5Db25uZWN0aW9uO1xyXG4gIGVtYmVkZGluZzogYW55O1xyXG59KSB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghY29ubikge1xyXG4gICAgICBjb25uID0gYXdhaXQgY29ubmVjdFNpbmdsZVN0b3JlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHF1ZXJ5ID1cclxuICAgICAgXCJTRUxFQ1QgdGl0bGUsIHRleHQsIERPVF9QUk9EVUNUX0Y2NChKU09OX0FSUkFZX1BBQ0tfRjY0KCdbXCIgK1xyXG4gICAgICBlbWJlZGRpbmcgK1xyXG4gICAgICBcIl0nKSwgY29udGVudF92ZWN0b3IpIEFTIHNjb3JlIEZST00gd2lraXBlZGlhIE9SREVSIEJZIHNjb3JlIERFU0MgTElNSVQgNVwiO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbm4ucXVlcnkocXVlcnkpO1xyXG4gICAgcmV0dXJuIHJlc3VsdFswXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgcmV0dXJuIGVycm9yO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBpZiAoY29ubikge1xyXG4gICAgICBhd2FpdCBzdG9wU2luZ2xlU3RvcmUoY29ubik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJteXNxbCIsIkhPU1QiLCJwcm9jZXNzIiwiZW52IiwiUEFTU1dPUkQiLCJVU0VSIiwiU1FMX0RBVEFCQVNFIiwiVkVDX0RBVEFCQVNFIiwiRXJyb3IiLCJjb25uZWN0U2luZ2xlU3RvcmUiLCJzaW5nbGVTdG9yZUNvbm5lY3Rpb24iLCJjcmVhdGVDb25uZWN0aW9uIiwiaG9zdCIsInVzZXIiLCJwYXNzd29yZCIsImRhdGFiYXNlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZXhpdCIsInN0b3BTaW5nbGVTdG9yZSIsImNvbm4iLCJlbmQiLCJmaW5kUmVsZXZhbnREb2NzIiwiZW1iZWRkaW5nIiwicXVlcnkiLCJyZXN1bHQiLCJsb2ciLCJzZWFyY2hEYXRhYmFzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/database/singlestore.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/lib/openai.ts":
/*!*******************************!*\
  !*** ./src/app/lib/openai.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getEmbedding: () => (/* binding */ getEmbedding)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\nconst apiKey = process.env.OPENAI_API_KEY;\nif (!apiKey) {\n    throw Error(\"open ai key not defined\");\n}\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (openai);\nasync function getEmbedding(text) {\n    const response = await openai.embeddings.create({\n        model: \"text-embedding-ada-002\",\n        input: text\n    });\n    const embedding = response.data[0].embedding;\n    if (!embedding) {\n        throw Error(\"error generating embedding.\");\n    }\n    return embedding;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xpYi9vcGVuYWkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBQzVCLE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUV6QyxJQUFJLENBQUNILFFBQVE7SUFDWCxNQUFNSSxNQUFNO0FBQ2Q7QUFFQSxNQUFNQyxTQUFTLElBQUlOLDhDQUFNQSxDQUFDO0lBQUVDO0FBQU87QUFDbkMsaUVBQWVLLE1BQU1BLEVBQUM7QUFFZixlQUFlQyxhQUFhQyxJQUFZO0lBQzdDLE1BQU1DLFdBQVcsTUFBTUgsT0FBT0ksVUFBVSxDQUFDQyxNQUFNLENBQUM7UUFDOUNDLE9BQU87UUFDUEMsT0FBT0w7SUFDVDtJQUVBLE1BQU1NLFlBQVlMLFNBQVNNLElBQUksQ0FBQyxFQUFFLENBQUNELFNBQVM7SUFFNUMsSUFBSSxDQUFDQSxXQUFXO1FBQ2QsTUFBTVQsTUFBTTtJQUNkO0lBRUEsT0FBT1M7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2FjZWUtcHJvdG8tb25lLy4vc3JjL2FwcC9saWIvb3BlbmFpLnRzP2Y4NjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tIFwib3BlbmFpXCI7XHJcbmNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZO1xyXG5cclxuaWYgKCFhcGlLZXkpIHtcclxuICB0aHJvdyBFcnJvcihcIm9wZW4gYWkga2V5IG5vdCBkZWZpbmVkXCIpO1xyXG59XHJcblxyXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHsgYXBpS2V5IH0pO1xyXG5leHBvcnQgZGVmYXVsdCBvcGVuYWk7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW1iZWRkaW5nKHRleHQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmVtYmVkZGluZ3MuY3JlYXRlKHtcclxuICAgIG1vZGVsOiBcInRleHQtZW1iZWRkaW5nLWFkYS0wMDJcIixcclxuICAgIGlucHV0OiB0ZXh0LFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBlbWJlZGRpbmcgPSByZXNwb25zZS5kYXRhWzBdLmVtYmVkZGluZztcclxuXHJcbiAgaWYgKCFlbWJlZGRpbmcpIHtcclxuICAgIHRocm93IEVycm9yKFwiZXJyb3IgZ2VuZXJhdGluZyBlbWJlZGRpbmcuXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGVtYmVkZGluZztcclxufVxyXG4iXSwibmFtZXMiOlsiT3BlbkFJIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiRXJyb3IiLCJvcGVuYWkiLCJnZXRFbWJlZGRpbmciLCJ0ZXh0IiwicmVzcG9uc2UiLCJlbWJlZGRpbmdzIiwiY3JlYXRlIiwibW9kZWwiLCJpbnB1dCIsImVtYmVkZGluZyIsImRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/lib/openai.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/ai","vendor-chunks/mysql2","vendor-chunks/openai","vendor-chunks/iconv-lite","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/named-placeholders","vendor-chunks/node-fetch","vendor-chunks/eventsource-parser","vendor-chunks/long","vendor-chunks/webidl-conversions","vendor-chunks/web-streams-polyfill","vendor-chunks/safer-buffer","vendor-chunks/ms","vendor-chunks/is-property","vendor-chunks/humanize-ms","vendor-chunks/generate-function","vendor-chunks/event-target-shim","vendor-chunks/denque","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Ccalze%5COneDrive%20-%20University%20of%20Central%20Florida%5CDesktop%5Csand%5Cacee-api%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccalze%5COneDrive%20-%20University%20of%20Central%20Florida%5CDesktop%5Csand%5Cacee-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();